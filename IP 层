二层网络的共性：封装成帧，透明传输，差错检测（比特差错）
二层网络的遗留问题：1，不同网络之间如何通信；2，如果解决可靠传输的问题
IP层只解决第一个问题，可靠传输交给 运输层
IP层尽最大可能传输

网际协议IP, 以及与IP协议配套使用的三个协议：ARP, ICMP, IGMP
网络接口层：物理层+数据链路层
使用中间设备（中间系统/中继系统）进行互连：
网络层：路由器
物理层：转发器（repeater）
数据链路层：交换机，网桥
网桥和路由器混合物：桥路器：brouter
网络层以上的中继系统：网关（gateway）
虚拟互连网络：逻辑互连网络，又称IP网；IP协议使得性能各异网络从用户角度是一个统一的网络
IP数据报在网络层传输，各个设备网络层逻辑上直接通信
IP地址：IP协议定义的地址；路由器的转发是基于IP地址
IP地址分配机构： 互联网名字和数字分配机构ICANN（Internet Corporation for Assigned Names and Numbers）

1, IP地址分类
IPv4（32位）= 网络号net-id（所在网络）+主机号host-id（在所在网络中的编号唯一）；一个IP地址在互联网中唯一
用户使用的：A类：8位+24位（0起始，0-126）；B类：16位+16位（10起始，128-191）；C类：24位+8位（110起始，192-223）
D类：1110+28位，多播地址；E类：1111+28位，以后用
点分十进制：8位一组：例如，128.11.3.31
主机号全0或全1都不用
（全1+全1）255.255.255.255 受限广播（路由器不转发）
net-id+全1：对net-id网络中所有主机广播，路由器有可能转发，直接广播
127.0.0.1：回环地址
IP地址分配机构只分配网络号，主机号由该网络号单位自行分配
路由器根据 主机所连接的网络号转发分组，减少路由表所占存储空间
IP地址：标志一个主机或路由器以及一条链路的接口（网卡）；因此IP地址实际是分配给网卡的，多个网卡就是多个IP地址
主机连接多个网络，则具备多个网络IP地址，网络号不同，这种主机:多归属主机（multihomed host）
一个路由器至少有两个不同的IP地址
一个网络意味着IP地址的网络号是一样的
转发器或网桥连接起来的若干个局域网仍是一个网络
2，划分子网
3，无分类编址方式---构造超网
ARP协议：实现IP地址和MAC地址之间的映射，IP地址解析到IP地址是自动进行的，是对用户透明的
局域网中主机和路由器中有ARP高速缓存，其中存放最近IP地址和MAC地址之间的映射关系
同一局域网中主机A-主机B通信过程：如果ARP高速缓存中有IP-MAC之间的映射关系，直接将MAC帧发送给目标主机
如果没有，进行广播ARP请求分组，由目标主机进行响应。
不同的局域网中的主机通信，需要通过路由器作为ARP代理进行转发分组。不同的局域网中通信，目标IP地址并不发生变化
但是映射的MAC地址分别为源主机局域网中进行分组转发的路由器所在源局域网接口的MAC地址，
第二个局域网中进行分组转发的路由器所在局域网接口的MAC地址。。。。最后才是 真正的目标IP地址和MAC地址之间的映射关系
ARP协议解析的四种场景：主机广播分组，主机响应；主机广播分组，路由器响应；路由器广播分组，主机响应，路由器广播分组，路由器响应
IP地址
